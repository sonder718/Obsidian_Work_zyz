# 集群模式的特点
- Redis集群模式是Redis用于实现**分布式存储**的一种方案。
- 它通过将**数据分片存储到多个Redis节点**上，从而实现了分布式存储。在集群模式下，每个Redis节点只存储==部分数据==，因此可以更好地利用内存。
- 集群模式下，**每个Redis节点都是独立的**，节点之间通过**Gossip协议**进行通信，从而实现数据的同步。集群模式的启动需要**启动多个Redis实例，并将它们组成一个集群**。
	- [[Redis节点间通信的Gossip协议]]
# 集群的数据分片
- Redis 集群没有使用一致性 hash，而是引入了**哈希槽**【hash slot】的概念。
- Redis 集群有**16384**（==2^14==）个哈希槽，每个 key 通过 CRC16 校验后对 16384 取模来决定放置哪个槽。集群的每个节点负责一部分hash槽
	- [循环冗余码 CRC](../../考研/408/计算机网络/循环冗余码%20CRC.md)
	- 在最大集群规模下，哈希槽均匀分布的情况下，每个分片平均分配的哈希槽数量不至于太小。Redis集群最多支持1000个分片，16384是相对比较好的选择。
	- 在redis节点发送**心跳包**时需要把所有的槽放到这个心跳包里，以便让节点知道当前集群信息，16384=16k，在发送心跳包时使用`char`进行bitmap压缩后是2k（`2 * 8 (8 bit) * 1024(1k) = 16K`），也就是说使用2k的空间创建了16k的槽数
	- [[Redis中的心跳包是什么]]