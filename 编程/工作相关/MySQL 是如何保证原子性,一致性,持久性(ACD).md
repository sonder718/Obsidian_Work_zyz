- MySQL事务的四个特性中ACD三个特性是通过Redo Log（重做日志）和Undo Log 实现的，而 I（隔离性）是通过Lock（锁）来实现
- [MySQL 是如何保证一致性、原子性和持久性的！ - 腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1600883)
# 原子性
- 事务就是一系列的操作，**要么全部都执行，要么全部都不执行**。
- undo log名为==回滚日志==，是实现原子性的关键，当**事务回滚时能够撤销所有已经成功执行的sql语句**，他需要记录你要回滚的相应日志信息。
	- [undo log(回滚日志)](undo%20log(回滚日志).md)
	- 对于每个insert，回滚时会执行delete；对于每个delete，回滚时会执行insert；对于每个update，回滚时会执行一个相反的update，把数据改回去
# 持久性
- 只要事务成功结束，它**对数据库所做的更新就必须永久保存下来**。
	- Mysql是先把磁盘上的数据加载到内存中，在内存中对数据进行修改，再刷回磁盘上。如果此时突然宕机，内存中的数据就会丢失
	- 一个页面16kb大小，就要将16kb的内容刷入磁盘,**要避免这种情况**
- 当做数据修改的时候，不仅在内存中操作，还会**在redo log中记录这次操作**。
	- [redo log(重做日志)](redo%20log(重做日志).md)
- 当事务提交的时候，会将redo log日志进行刷盘
	- (redo log一部分在内存中，一部分在磁盘上)。
- 当数据库宕机重启的时候，会将**redo log中的内容恢复到数据库中**，再根据undo log和bin log内容决定回滚数据还是提交数据。