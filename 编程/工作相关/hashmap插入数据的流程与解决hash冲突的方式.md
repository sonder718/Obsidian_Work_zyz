以Java8为参考，HashMap插入元素的流程为：
- 判断当前容量大小是否为空，如果为空（**未设置容量初始值**），则把容量扩充为16。
- 获取key的**hashCode**，对hashCode进行扰动处理，计算出元素的下标。
	- [equals 和 hashCode 的关系](equals%20和%20hashCode%20的关系.md)
	- [[如何计算hashmap数据插入的位置]]
- 根据下标判断有无hash碰撞
	- 如果没有，则直接放入桶中。
		- [处理散列函数冲突的方式](../../考研/408/数据结构/处理散列函数冲突的方式.md)
	- 如果发生碰撞，比较两个key是否相同
		- 即**链式寻址法以及红黑树来解决Hash冲突的问题**
		- 相同则覆盖
		- 不同则则以链表的方式插入到尾部。（尾插法）。
- 如果插入后链表的长度超过了阈值（TREEIFY_THRESHOLD = 8），则把**链表转为红黑树**。
- 插入成功后，如果元素个数到达了阈值（size = 容量 * 阈值 ），则执行**扩容**操作判断（容量最大值为1<<31）
- 扩容成功后，对元素的下标进行重新计算。
