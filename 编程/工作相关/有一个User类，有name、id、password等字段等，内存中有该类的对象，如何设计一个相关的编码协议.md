1. **在数据中保存报文长度**  
- 在发送User对象之前，先计算出User对象序列化后的字节数组长度。  
- 在发送数据时，先发送一个4字节的int类型数据，表示后面要发送的User对象字节数组长度。  
- 在接收数据时，先接收4字节的int类型数据，表示后面要接收的User对象字节数组长度。然后再接收相应长度的字节数组，将其反序列化为User对象即可。  
  
2. **用K-V对存储数据**  
- 在发送User对象之前，将User对象转换为一个Map<String, String>对象，其中键值对的键为User对象的字段名，值为字段对应的值。  
- 将Map对象转换为JSON字符串，然后发送该字符串即可。  
- 在接收数据时，先接收JSON字符串，然后将其转换为Map对象。  
- 根据Map对象的键值对，创建一个User对象即可。