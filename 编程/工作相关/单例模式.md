#### 需求与常见应用
- 需求
	- 资源共享的情况下，避免由于资源操作时导致的性能或损耗等
	- 控制资源的情况下，方便资源之间的互相通信
- 示例
	- Windows的任务管理器,回收站
	- 应用程序的日志应用
		- 共享的日志文件一直处于打开状态，因为只能有一个实例去操作，否则内容不好追加
	- 数据库连接池
		- 节省打开或者关闭数据库连接所引起的效率损耗
	- 多线程的线程池
#### 本质
- 内存中**只能仅创建一次对象**的设计模式
#### 目的
- 在程序中多次使用同一个对象且作用相同时，为了**防止频繁地创建对象使得内存飙升**
- 单例模式可以让程序仅在内存中创建一个对象，让所有需要调用的地方都**共享这一单例对象**
#### 特点
- 单例类只能有一个实例
- 单例类必须自己创建自己的唯一实例
- 单例类必须给所有其他对象提供这一实例的访问
#### 类型
##### 懒汉式
- 在真正**需要使用对象时**才去创建该单例类对象
- **问题**-==线程安全==
	- 第一次检验
		- 如果 singleton 不为空，则直接返回对象，不需要获取锁
	- 加锁
		- 多个线程尝试争抢同一个锁，只有一个线程争抢成功
	- 第二次检验
		- 第一个获取到锁的线程
			- 再次判断singleton 是否为空，因为 singleton 有可能已经被之前的线程实例化
		- 之后获取到锁的线程
			- 发现 singleton 已经不为空了，则不会再 new 一个对象，直接返回对象
- ![](attachments/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%202023-01-15%2023.08.16.excalidraw.svg)
%%[🖋 Edit in Excalidraw](attachments/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%202023-01-15%2023.08.16.excalidraw.md), and the [dark exported image](attachments/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%202023-01-15%2023.08.16.excalidraw.dark.svg)%%
##### 饿汉式
- 在**类加载时**已经创建好该单例对象，等待被程序使用
- **特点**
	- 对内存要求不高时使用
	- 简单不易出错，且没有任何并发安全和性能问题
- ![](attachments/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%202023-01-15%2023.09.07.excalidraw.svg)
%%[🖋 Edit in Excalidraw](attachments/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%202023-01-15%2023.09.07.excalidraw.md), and the [dark exported image](attachments/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%202023-01-15%2023.09.07.excalidraw.dark.svg)%%

