# 什么是缓存雪崩
- 大量的请求没有在Redis缓存中得到处理，从而导致请求都涌入到数据库中，然后数据库的压力剧增。
- **原因**
	- 缓存中有大量的数据同时过期，这样此时大量的请求都到数据库了。
	- Redis缓存实例发生故障了，无法处理大量请求
# 场景1-缓存中大量的数据同时过期
- 大量的数据在同一时间过期，然后此时又有很多的请求要读取这些数据。
- **解决**
	- 数据过期设置增加**随机时间**：
		- 也就是用expire命令给数据设置过期时间时，增加一个随机的时间，比如数据a是5分钟过期，在5分钟的基础上随机增加10-120秒时间。这样就能避免大量数据同时过期。
	- **服务降级**：也就是发生缓存雪崩时
		- （1）若**访问的不是核心数据**，当没有缓存命中时，不去数据库了，**直接返回预先设置好的信息**，比如空值或者错误信息；
		- （2）当**访问的是核心数据**，缓存未命中时，允许去数据库查询。这样就将不是核心数据的请求都拒绝怼到数据库了。

# 场景2-Redis缓存实例故障导致的缓存雪崩
-   在业务系统中做好**服务熔断/请求限流**。
	- 当Redis发生故障时，暂停请求对缓存系统的访问。等到Redis恢复正常了再打开请求访问
	- 控制QPS，避免过多的请求怼到数据库去
-   事前预防：构建Redis高可靠集群，**比如主从集群的主备切换。**