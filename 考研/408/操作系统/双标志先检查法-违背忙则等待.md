## 双标志先检查法
### 思想
- 设置一个布尔型数组` flag[]`，数组中各个元素用来标记各进程想进入临界区的**意愿**
	- “flag[0] = ture”意味着 0 号进程 P0 现在想要进入临界区。
	- 每个进程在进入临界区之前先检查当前有没有别的进程想进入临界区，如果没有，则把自身对应的标志 flag[i] 设为 true，之后开始访问临界区。
### 实现
![](attachments/%E5%AE%9E%E7%8E%B0%E4%B8%B4%E7%95%8C%E5%8C%BA%E4%BA%92%E6%96%A5%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95%202022-09-22%2019.44.45.excalidraw.svg)
%%[🖋 Edit in Excalidraw](attachments/%E5%AE%9E%E7%8E%B0%E4%B8%B4%E7%95%8C%E5%8C%BA%E4%BA%92%E6%96%A5%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95%202022-09-22%2019.44.45.excalidraw.md)%%

### 特性
- 违反“**忙则等待**”原则
	- 采用152637访问**会同时访问临界区**
	- 原因在于，进入区的“检查”和“上锁” 两个处理不是一气呵成的。“检查”后，“上锁”前可能发生进程切换。