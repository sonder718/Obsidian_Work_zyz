#### 内核功能与组成
- **定义**:计算机上配置的**底层软件**,管理系统的各种资源,是连接应用程序和硬件的桥梁
- 内核建立了计算机软件与硬件之间通讯的平台，内核提供系统服务，比如文件管理、虚拟内存、设备I/O等。
- 由下可知,核心态指令包含**系统调用类指令和一些针对时钟,中断,原语的操作指令**
- **内核程序**
	- 实现操作系统内核功能的那些程序。
- ![](attachments/Pasted%20image%2020220920174832.png)
- **内核的组成**
	- 时钟管理
	- 中断机制
	- 原语
	- 系统控制的数据结构及处理
- **时钟管理**
	- 时钟是计算机中最关键的设备
	- 功能
		- 计时
		- 通过时钟中断的管理,实现[进程切换](进程切换.md)
- **中断机制**
	- 主要针对外部设备,目的是提高多道程序运行环境的CPU利用率
	- 中断机制中**只有一小部分属于内核**,负责保护和恢复中断现场的信息,转移控制到相关的处理程序 #疑问 其他部分属于?
	- #注意 中断服务程序属于内核
	- #疑问 鼠标和键盘信息的输入,文件访问如何依赖于中断机制
- **原语**(Atomic Operation)
	- #注意 原语和系统调用是两个层面的概念，它们之间**没有联系** 
		- 原语强调的是 某个操作或者指令集合 的**连续性以及不可中断性**。
	- 操作系统最接近硬件的部分
	- **原子性**,只能一气呵成执行
	- 调用频繁,运行时间短
	- **定义原语的直接方法:** 关闭中断,让其所有动作不可分割地完成后再打开中断. #疑问 举例说明原语的定义
		- **原语是由关中断/开中断指令实现 的**。
	- #疑问 系统中的设备驱动,CPU切换,进程通信等功能中的部分操作都可以定义成原语,**使他们成为内核的组成部分**
- **系统控制的数据结构及处理**
	- 一些用于登记数据状态的数据结构:作业控制块,进程控制块,设备控制块,各类链表,消息队列,缓冲区,空闲区登记表,内存分配器等
	- **常见的操作**
		- 进程管理
		- 存储器管理
		- 设备管理
#### 需要硬件支持的操作系统功能组成举例
- 时钟管理:需要硬件计数器
- 地址映射:需要基地址寄存器和地址加法器的支持
- 中断处理:前三个步骤硬件直接实现