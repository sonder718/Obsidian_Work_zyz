##### 索引分配的目的
- 管理不连续的物理块
##### 什么是索引分配
- **目录**
	- 存放**各文件的**索引块 #408x 
		- 索引块是==该文件索引表存放的位置==
- **索引表**
	- ==每个文件==都有
		- #注意 ==提高==了存储代价,而不是降低了
	- 存放本文件中各逻辑块对应物理块
- ![](attachments/Pasted%20image%2020221121141617.png)
##### 访问文件的过程
- 用户给出要访问的逻辑块号 i，操作系统找到该文件对应的目录项（FCB）
- 从**目录项**中可知索引表存放位置
- 将索引表从==外存==读入内存，并查找索引表即可知道 i 号逻辑块在外存中的存放位置。
	- 支持==随机访问==。 #z408 
	- 文件拓展也很容易实现（只需要**给文件分配一个空闲块，并增加一个索引表项**即可）但是索引表需要占用一定的存储空间
- 将**文件块从外存读入内存**
	- 需要==两次访问外存==
		- 读索引表
		- 读文件块
##### 如何组织索引块来支持大文件
- 多个索引块链接
	- ![](attachments/Pasted%20image%2020221121143309.png)
- **多层索引**
	- 一个4096B的磁盘块,每个块地址大小为4B
	- 一个磁盘块可以存1024个指针
		- 每层索引不能超过一个磁盘块
		- ![](attachments/Pasted%20image%2020221121142522.png)
	- 两级索引可以存2^20个指针,即支持2^20×4096B=4GB的文件
		- ![](attachments/Pasted%20image%2020221121143324.png)
- 混合索引
	- [文件物理结构-混合索引分配](文件物理结构-混合索引分配.md)