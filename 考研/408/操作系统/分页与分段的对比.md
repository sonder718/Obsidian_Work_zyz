# 对比分页与分段
## 信息的物理单位与逻辑单位
- **信息的物理单位与逻辑单位**
	- 页是信息的**物理单位**。
		- 分页的主要目的是为了实现离散分配，**提高内存利用率**。分页仅仅是系统管理上的需要，完全是系统行为，**对用户是不可见**的。
	- 段是信息的**逻辑单位**。
		- 分段的主要目的是更好地满足用户需求。一个段通常包含着一组属于一个逻辑模块的信息。
		- **分段对用户是可见的**，用户编程时需要**显式地给出段名**。 #注意
## 大小是否固定
- **大小是否固定**
	- 页的大小固定且由系统决定。
	- 段的长度却不固定，决定于用户编写的程序。
## 用户进程地址空间维度
- **用户进程地址空间维度** #疑问 #注意
	- 分页的用户进程地址空间是一维的，程序员只需给出一个记忆符即可表示一个地址。
		- 可以将一个完整的逻辑地址根据**页大小**自动确定出(页号与页内偏移),从而计算出物理地址
	- 分段的用户进程地址空间是二维的，程序员在标识一个地址时，既要给出段名，也要给出段内地址。
		- 由于段号是不确定了,**即无法根据一个整数的逻辑地址就确定物理地址,而是要显式给出(段号,段内偏移)** #注意
	- ![](attachments/Pasted%20image%2020220927141535.png)
## 访存次数
- **访存次数**
	- 分页（**单级页表**）：
		- 第一次访存——查内存中的页表，第二次访存——访问目标内存单元。
		- **总共两次访存**
	- 分段
		- 第一次访存——查内存中的段表，第二次访存——访问目标内存单元。
		- **总共两次访存**
## 信息的共享和保护
- **信息的共享和保护**
	- 分段比分页更容易实现信息的共享和保护。
	- **可重入代码**
		- **不能被修改的代码**称为纯代码或可重入代码（不属于临界资源），这样的代码是可以共享的。
			- 🐱简单的输出 “Hello World！”
		- 可修改的代码是不能共享的（比如，有一个代码段中有很多变量，各进程并发地同时访问可能造成数据不一致）
	- **段的共享方式**
		- 只需**让各进程的段表项指向同一个段**即可 实现共享 #注意 
		- ![](attachments/Pasted%20image%2020220927141826.png)
	- **页面很难实现共享与保护**
		- 对分段,只需在段表中添加"是否允许其他进程访问"字段.
		- 页面不是按逻辑模块划分 的。这就很难实现共享。
		- ![](attachments/Pasted%20image%2020220927141907.png)
## 提供给用户的内存空间
- #注意 页表与段表同样存储在内存中,系统提供给用户的物理地址空间为总空间大小**减去页表或段表的长度**
	- 即大小不能确定