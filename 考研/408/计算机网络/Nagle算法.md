**`Nagle` 算法的规则（可参考`tcp_output.c` 文件里 `tcp_nagle_check` 函数注释）：**

1.  如果包长度达到 `MSS`，则允许发送；
2.  如果该包含有 `FIN`，则允许发送；
3.  设置了 `TCP_NODELAY` 选项，则允许发送；
4.  未设置 `TCP_CORK` 选项时，若所有发出去的小数据包（包长度小于`MSS`）均被确认，则允许发送；
5.  上述条件都未满足，但发生了超时（一般为 `200ms`），则立即发送。

  

作者：格格步入  
链接：https://juejin.cn/post/7135839422360551455  
来源：稀土掘金  
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。