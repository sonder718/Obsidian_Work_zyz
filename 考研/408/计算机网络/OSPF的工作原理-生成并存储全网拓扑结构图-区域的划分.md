## OSPF的工作原理
#### 生成并存储全网拓扑结构图
- 由于各路由器之间频繁地交换链路状态信息,因此所有路由器最终都能建立一个链路状态数据库,即全网的拓扑结构图,它在全网范围内是**一致的**(称为链路状态数据库的同步)。
- 然后,每个路由器根据这个全网拓扑结构图,使用==Dijkstra最短路径算法==计算从自己到各目的网络的最优路径,以此构造自己的路由表。此后,当链路状态发生变化时,每个路由器重新计算到各目的网络的最优路径,构造新的路由表。
	- 注意:虽然使用Dijkstra算法能计算出完整的最优路径,但路由表中不会存储完整路径,而==只存储“下一跳”==(只有到了下一跳路由器,才能知道再下一跳应当怎样走)。 #注意
	- **OSFP中的路由表实例** #注意
		- ![](attachments/Pasted%20image%2020221025171956.png)
		- 链路状态公告LSA （Link State Advertisement）
		- ![](attachments/Pasted%20image%2020221025203859.png)
		- [邻接多重表存储图的实例--保存OSPF协议的路由表](考研/408/数据结构/邻接多重表存储图的实例--保存OSPF协议的路由表.md)
#### 区域的划分
- 为使OSPF能够用于规模很大的网络, OSPF将一个==自治系统==再划分为若干更小的范围,称为**区域**。
	- 划分区域的好处是,将==利用洪泛法交换链路状态信息的范围局限于每个区域而非整个自治系统==,减少了整个网络上的通信量。 #注意
	- 在一个区域内部的路由器只知道==本区域的完整网络拓扑==,而不知道其他区域的网络拓扑情况。 #注意
	- 这些区域也有层次之分。处在上层的域称为**主干区域**,负责连通其他下层的区域,并且还连接其他自治域。
	- ![](attachments/Pasted%20image%2020221012171103.png)