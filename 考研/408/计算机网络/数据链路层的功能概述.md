# 一些基本概念
- **结点**
	- 主机、路由器
- **链路**
	- 网络中两个结点之间的**物理通道**
	- 链路的传输介质主要有双绞线、光纤和微波。
- **数据链路**
	- 网络中两个结点之间的**逻辑通道**
	- 把**实现控制数据传输协议的硬件和软件**加到链路上就构成数据链路
- **帧**
	- 链路层的协议数据单元,封装网络层数据报。

# 数据链路层的功能
## 概述
- 数据链路层负责通过**一条链路**从**一个结点**向另一个物理链路**直接相连的相邻结点**传送**数据报**。
- 数据链路层在物理层提供服务的基础上**向网络层提供服务**,其最基本的服务是将源自网络层来的数据**可靠地**传输到相邻节点的目标机网络层。
- 其主要作用是加强物理层传输原始比特流的功能,将物理层提供的可能出错的物理连**改造成为逻辑上无差错的数据链路**,使之对网络层表现为一条无差错的链路。 #注意 
- ![](attachments/Pasted%20image%2020221002194547.png)

## 为网络层提供服务
- **无确认无连接服务**
	- 对于丢失的帧,数据链路层不负责重发而交给上层处理
	- 适用于实时通信或误码率较低的通信信道,如以太网
- **有确认无连接服务**
	- 发送数据帧时不需要建立链路连接,但是目的机器收到数据帧时**必须发回确认**,源机器未收到则重传.
	- 适用于误码率较高的通信信道,如无线通信
- **有确认面向连接服务**
	- 可靠性最高 #注意 
	- 适用于通信要求最高的场合
	- #注意 有连接就一定要有确认
## 链路管理
- 数据链路层连接的**建立,维持与释放**过程称为**链路管理**
- 主要用于面向连接的服务
## 组帧
- **帧定界**
	- 数据前后添加首部和尾部
	- 首部和尾部包含很多控制信息,其重要作用之一是**确定帧的界限**
- **帧同步**
	- 指接收方应当能从接收到的二进制比特流中区分出帧的起始和终止
	- ![](attachments/Pasted%20image%2020221002195808.png)
- **透明传输** #注意
	- 如果在数据中恰好出现与帧**定界符相同的比特组合**(会误认为“传输结束”而丢弃后面的数据),那么就要采取有效的措施解决这个问题,即**透明传输**。更确切地说,透明传输就是**不管所传数据是什么样的比特组合,都应当能在链路上传送**。
## 流量控制
- 由于收发双方各自的工作速率和缓存空间的差异,可能出现**发送方的发送能力大于接收方的接收能力的现象**,如若此时不适当限制发送方的发送速率(即链路上的信息流量),前面来不及接收的帧将会被后面不断发送来的帧“淹没”,造成帧的丢失而出错。
- 因此,**流量控制实际上就是限制发送方的数据流量,使其发送速率不超过接收方的接收能力**。 #注意
	- 这个过程需要通过某种反馈机制使发送方能够知道接收方是否能跟上自己,即需要有一些规则使得发送方知道在什么情况下可以接着发送下一顿,而在什么情况下必须暂停发送,以等待收到某种反馈信息后继续发送。
- 流量控制并不是数据链路层特有的功能,许多高层协议中也提供此功能,只不过**控制的对象不同**而已。对于数据链路层来说,控制的是相邻两结点之间数据链路上的流量,而对于运输层来说,控制的则是从源端到目的端之间的流量
- #注意 在OSI体系结构中,数据链路层具有流量控制的功能。而在TCP/P体系结构中,量控制功能被移到了传输层。因此,有部分教材将流量控制放在传输层进行讲解。
## 差错控制
- 由于信道噪声等各种原因,帧在传输过程中可能会出现错误。**用以使发送方确定接收方是否正确收到由其发送的数据的方法称为差错控制。** 通常,这些错误可分为**位错和帧错**。
- **位错**指顿中某些位出现了差错。
	- 通常采用**循环冗余校验**(CRC)方式发现位错,通过自动重传请求(Automatic Repeat reQuest, ARQ)方式来重传出错的帧。
	- 具体做法是:让发送方将要发送的数据帧附加一定的CRC冗余检错码一并发送,接收方则根据检错码对数据帧进行错误检测,若发现错误则丢弃,发送方超时重传该数据帧。这种差错控制方法称为**ARQ法**。ARQ法只需返回很少的控制信息就可有效地确认所发数据顿是否被正确接收。
- **帧错**指帧的丢失、重复或失序等错误。
	- 在数据链路层引入**定时器和编号机制**,能保证每一帧最终都能**有且仅有一次正确地交付给目的结点**。
	- 定时器防止丢失
	- 编号防止乱序 <!--SR:!2022-10-15,3,250-->
