# 网桥
## 网桥的作用
- 网桥工作于数据链路层，对它收到的MAC帧根据MAC地址进行过滤和转发，网桥将网络的多个网段在数据链路层连接起来，在数据链路层扩展以太网用到的就是网桥（还有交换机，后面说）。
- 网桥具有自学功能，每收到一个帧，就暂存到其缓冲中，若此帧没有出现差错，则通过查找站表，将收到的帧转发从对应的端口转发出去，若有差错，则丢弃。
- 网桥过滤了通信量，扩大了物理范围，提高了可靠性，但也增加了时延，不适用于通信量过大的局域网。

## 几种类型的网桥
**网桥**
	- ![](attachments/Pasted%20image%2020221009173841.png)
- **透明网桥** 
	- **转发表内容**
		- 源站MAC地址
			- #注意 不存目的MAC地址
		- 帧进入的端口号
		- 帧到达时间
	- ![](attachments/Pasted%20image%2020221009173914.png)
- **源路由网桥**
	- ![](attachments/Pasted%20image%2020221009173931.png)
- 
# 交换机
- **多接口网桥**(以太网交换机)
	- 这里说的交换机是以太网交换机，又叫交换式集线器。交换机实质上是一个多接口的网桥，通常有十几个或者更多的接口，采用全双工工作方式，具有并行性，可以同时连通多对接口、多对主机进行通信，有自学功能，这种自学功能就使得交换机能即插即用，不需要进行人工配置，非常方便。
	- ![](attachments/Pasted%20image%2020221009174022.png)
## 交换机的两种交换方式
- ![](attachments/Pasted%20image%2020221009174110.png)
- #注意 直通式交换机只检查==目的地址==(6B),则其转发延迟至少为6B/(传输速率) #z408 
- #注意 ![](attachments/Pasted%20image%2020221009183223.png)
	- 以太网的直通交换方式在输入端口检测到一个 [数据包](http://baike.baidu.com/view/25880.htm) 时，检查该包的包头，获取包的目的地址，启动内部的动态查找表转换成相应的输出端口，在输入与输出交叉处接通，把数据包直通到相应的端口，实现交换功能。
	- 它只检查 [数据包](http://baike.baidu.com/view/25880.htm) 的包头(包括**7个字节的前同步码+1个字节的帧开始界定符+6个字节的目的地址共14个字节**)，#注意
	- 有时题目说明**不包含前导码，即只包6个字节含目的地址**。那么转发时延=6B/100Mbps=0.48us
	- [以太网-应用最为广泛的局域网](以太网-应用最为广泛的局域网.md)

-
## 交换机的自学习功能
- #注意 交换机的优点是**每个端口占用的带宽不会因为节点数的增加而减少**,且整个交换机的总带宽会随着端口节点的增加而干
	- 即连接10个用户的10Mb/s的交换机,每个用户独享10Mb/s
- 交换机工作在全双工状态,**支持多对用户同时通信**
- **过滤**
	- 决定一个帧是应该转发到某个接口还是应该将其丢弃称为过滤。
- **转发**
	- 决定一个帧应该被移动到哪个接口称为转发。
- **转发表**
	- 交换机的过滤和转发借助于交换表(switch table)完成。
	- 交换表中的一个表项至少包含
		-  ①一个MAC地址;
		- ②连通该MAC地址的交换机接口。
- 🐱,在图3.37中,以太网交换机有4个接口,各连接一台计算机,MAC地址分别为A、B、C和D,交换机的交换表初始是空的。
	- ![](attachments/Pasted%20image%2020221009182001.png)
	- A先向B发送一帧，从接口Ⅰ进入交换机。交换机收到帧后，查找交换表，**找不到MAC地址为B的表项**。
	- 然后，交换机将该帧的**源地址A和接口1**写入交换表，并向<mark style="background: #FF5582A6;">按口1外的所有接口</mark>==广播==这个帧 #注意 #z408 
		- C和D丢弃该帧，因为目的地址不对。
		- ==只有B才收下这个目的地址正确的帧==。
	- 交换表中写入(A, 1)后,**以后从任何接口收到目的地址为A的帧,都应该从接口1转发出去**。这是因为,既然A发出的帧从接口1进入交换机,那么从接口1转发出去的帧也应能到达A。
