- 什么是文件传输协议FTP
	- 文件传输协议（File Transfer Protocol，FTP）是用于在网络上进行文件传输的一套标准协议
	- FTP允许用户以文件操作的方式（如文件的增、删、改、查、传送等）与另一主机相互通信。然而， 用户并不真正登录到自己想要存取的计算机上面而成为完全用户， 可用FTP程序访问远程资源， 实现用户往返传输文件、目录管理以及访问电子邮件等等， 即使双方计算机可能配有不同的操作系统和文件存储方式。
	- ![](attachments/Pasted%20image%2020221123134741.png)
- 文件传输协议FTP的**工作过程**
	- 工作模式
		- 客户机/服务器模式
	- **被动模式**工作流程
		- 客户端发送PASV命令
		- 服务器收到Pasv命令后，打开一个==临时端口==（端口号大于1023小于65535）,通知客户端在这个端口上传送数据的请求
		- **客户端发起数据连接** #注意
	- **主动模式**工作流程
		- **控制连接**
			- **FTP客户**首先发起建立1个与==FTP服务器端口号21==之间的**TCP控制连接**, 指定==TCP==作为传输层协议
				- 客户端发送PORT命令
					- PORT h1,h2,h3,h4,p1,p2 (h1-h4是IP地址，p1-p2是端口号)
				- 客户端==随机开放==一个端口
				- #注意 整个会话期间一直打开
			- 客户在建立的**控制连接**上获得==身份认证==
			- 客户在建立的**控制连接**上发送命令来==浏览远程主机的目录==.
		- **数据连接**
			- 当**服务器**接收到1个**文件传输命令**时, 在==服务器端口号20==创建1个与客户 的==TCP数据连接== #注意 #z408 客户端端口==不一定是20==
				- **服务器**根据PORT命令指定的客户端地址和端口号发起数据连接
			- 1个文件传输后,==服务器==**结束**这个TCP**数据连接**,控制连接==保持打开==. #注意 #z408 
			- 之后 再次传输，服务器**再次创建**第2个TCP与客户的数据连接来传输下一个文件.
		- ![](attachments/Pasted%20image%2020221123134842.png)