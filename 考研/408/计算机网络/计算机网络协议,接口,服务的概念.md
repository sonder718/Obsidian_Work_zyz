# Tips
![](attachments/Pasted%20image%2020220928160918.png)
# 协议
- 协议,就是规则的集合。在网络中要做到有条不素地交换数据,就必须遵循一些事先约定好的规则。这些规则明确规定了所交换的数据的格式及有关的同步问题。
- 这些为进行网络中的数据交换而建立的规则、标准或约定称为**网络协议(Network Protocol)**,它是控制两个(或多个)**对等实体**进行通信的规则的集合,是**水平**的。 #注意
- **不对等实体之间是没有协议的**,比如用TCP/IP协议栈通信的两个结点,结点A的传输层和结点B的传输层之间存在协议,但结点A的传输层和结点B的网络层之间不存在协议。
- 网络协议也简称为协议。协议由语法、语义和同步三部分组成。
	- **语法**规定了传输数据的**格式**;
	- **语义**规定了所要完成的**功能**,即需要发出何种控制信息、完成何种动作及做出何种应答;
	- **同步(时序)** 规定了执行各种操作的**条件、时序关系**等,即事件实现==顺序==的详细说明。 #z408 
		- ![](attachments/Pasted%20image%2020220928193852.png)
- 一个完整的协议通常应具有线路管理(建立、释放连接)、差错控制、数据转换等功能。

# 接口
- 接口是**同一结点**内**相邻两层间**交换信息的**连接点**,是一个系统内部的规定。
- 每层只能为紧邻的层次之间定义接口,不能跨层定义接口。在典型的接口上,同一结点相邻两层的实体通过**服务访问点**(Service Access Point, SAP)进行交互。 #注意
- 服务是通过SAP提供给上层使用的,**第n层的SAP就是第n+1层可以访问第n层服务的地方。** 每个SAP都有一个能够标识它的地址。SAP是一个抽象的概念,它实际上是一个**逻辑接口**(类似于邮政信箱),但和通常所说的两个设备之间的硬件接口是很不一样的。
	- 应用层提供的服务访问点是"用户界面"
	- 传输层是"端口号"
	- 网络层是"IP地址"
	- 链路层是"MAC地址"
	- 物理层是"网卡接口"

# 服务
## 什么是服务
- 服务是指下**层为紧邻的上层**提供的**功能调用**,它是垂直的。 #注意
- 注意:在一层内完成的全部功能并非都称为服务,只有那些能够被**高一层实体“看得见”** 的功能才能称为服务 #注意
- 对等实体在协议的控制下,使得本层能为上一层提供服务,但要实现本层协议还需要使用下一层所提供的服务。上层使用下层所提供的服务时必须与下层交换一些命令,这些命令在OSI参考模型中称为服务原语。
- OSI参考模型将原语划分为4类:
	- 1)请求(Request)。由服务用户发往服务提供者,请求完成某项工作。
	- 2)指示(Indication)。由服务提供者发往服务用户,指示用户做某件事情。
	- 3)响应(Response)。由服务用户发往服务提供者,作为对指示的响应。
	- 4)证实(Confirmation)。由服务提供者发往服务用户,作为对请求的证实。
	- 这4类原语用于不同的功能,如建立连接、传输数据和断开连接等。
- 有应答服务包括全部4类原语,而无应答服务则只有请求和指示两类原语。

## 服务的分类
### 面向连接服务与无连接服务
- **面向连接服务**
	- 在面向连接服务中,通信前双方必须先建立连接,分配相应的资源(如缓冲区),以保证通信能正常进行,传输结束后释放连接和所占用的资源。
	- 因此这种服务可以分为连接建立、数据传输和连接释放三个阶段。
	- 例如**TCP就是一种面向连接服务的协议**。 #注意
- **无连接服务**
	- 在无连接服务中,通信前双方不需要先建立连接,需要发送数据时可直接发送,把每个带有目的地址的包(报文分组)传送到线路上,由系统选定路线进行传输。
	- 这是一种**不可靠**的服务。 #注意
	- 这种服务常被描述为“尽最大努力交付”(Best-Effort-Delivery),它并不保证通信的可靠性。
	- 例如**IP、 UDP就是一种无连接服务的协议**。 #注意
### 可靠服务和不可靠服务
- **可靠服务**
	- 可靠服务是指网络具有纠错、检错、应答机制,能保证数据正确、可靠地传送到目的地。
- **不可靠服务**
	- 不可靠服务是指网络只是尽量正确、可靠地传送,而不能保证数据正确、可靠地传送到目的地,是一种尽力而为的服务。
	- 对于提供不可靠服务的网络,其网络的正确性、可靠性要由应用或用户来保障。
		- 例如,用户收到信息后要判断信息的正确性,如果不正确,那么用户要把出错信息报告给信息的发送者,以便发送者采取纠正措施。通过用户的这些措施,可以把不可靠的服务变成可靠的服务。
### 有应答服务和无应答服务
- **有应答服务**
	- 有应答服务是指接收方在收到数据后向发送方给出相应的应答,该应答由传输系统内部自动实现,而不由用户实现。所发送的应答既可以是肯定应答,也可以是否定应答,通常在接收到的数据有错误时发送否定应答。例如,文件传输服务就是一种有应答服务。
- **无应答服务**
	- 无应答服务是指接收方收到数据后不自动给出应答。若需要应答,则由高层实现。例如,对于www服务,客户端收到服务器发送的页面文件后不给出应答。