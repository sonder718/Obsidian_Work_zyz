### CSMA-CD下最小帧长与争用期-防止发生碰撞但已经发完导致没法停止发送
- 🐱A站发了一个很短的帧但发生了碰撞不过帧在发送完毕后才检测到发生碰撞没法停止发送因为发完了.
- ![](attachments/Pasted%20image%2020221008210105.png)
- **争用期**
	- 由图可知，站A在发送帧后**至多经过时间2τ**(**端到端传播时延的2倍**)就能知道所发送的帧有没有发生碰撞( 当δ→0时)。 
	- 因此把==以太网端到端往返时间2τ==称为**争用期**(又称冲突窗口或碰撞窗口)。 #注意  #z408 
	- 每个站在自己发送数据之后的一小段时间内，存在发生碰撞的可能性，**只有经过争用期这段时间还未检测到碰撞时**，才能确定这次发送不会发生碰撞. #注意
	- ![](attachments/Pasted%20image%2020221008210449.png)
- **最小帧长**
	- 为了确保发送站**在发送数据的同时**能检测到可能存在的碰撞，需要在发送完帧**之前**就能收到自己发送出去的数据，即==帧的<mark style="background: #FF5582A6;">传输时延</mark>至少要两倍于信号在总线中的<mark style="background: #FF5582A6;">传播时延</mark>== #z408 
	- 所以CSMA/CD总线网中的所有数据帧都必须要**大于一个最小帧长**。任何站点收到帧长小于最小帧长的帧时，就把它当作无效帧立即丢弃。
	- 最小帧长的计算公式为: #注意
		- $L\geq总线传播时延*数据传播速率*2$
		- 即$2τ*数据传播速率$ #z408 
		- 即总线传播时延= L/数据传输速率/2
	- ![](attachments/%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%202022-10-08%2022.44.55.excalidraw.svg)
%%[🖋 Edit in Excalidraw](attachments/%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%202022-10-08%2022.44.55.excalidraw.md)%%
- **以太网的规定**
	- 例如，以太网**规定取51.2pus为争用期**的长度。对于10Mb/s的以太网,在争用期内可发送512bit,即64B.在以太网发送数据时，如果前64B未发生冲突，那么后续数据也就不会发生冲突(表示已成功抢占信道)。换句话说，如果发生冲突，那么就一定在前64B。 由于一旦检测到冲突就立即停止发送，因此这时发送出去的数据一定小于 64B。
	- 因此，**以太网规定最短帧长**为==64B==,凡长度小于64B的帧都是由于冲突而异常中止的无效帧，收到这种无效帧时应立即丢弃。 #注意
		- 如果只发送小于64B的帧，如40B的帧，那么需要在**MAC子层中于数据字段的后面加入一个整数字节的填充字段**，以保证以太网的MAC帧的长度不小于64B。