[æ•°æ®åº“ç´¢å¼•â€”â€”B+æ ‘ç´¢å¼•ï¼ˆä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘ä½œä¸ºMySqlçš„ç´¢å¼•ç»“æž„ï¼Œç”¨ä»€ä¹ˆå¥½å¤„ï¼Ÿï¼‰ - your_æ£’æ£’ç³– - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/Candycan/p/14810842.html)
##### ä½¿ç”¨B-Treeï¼ˆB+Tree)çš„åŽŸå› 
- æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨B-/+Treeä½œä¸ºç´¢å¼•ç»“æž„
- ç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­,ç´¢å¼•å¾€å¾€ä»¥**ç´¢å¼•æ–‡ä»¶**çš„å½¢å¼å­˜å‚¨çš„**ç£ç›˜**ä¸Šã€‚
- ç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¦äº§ç”Ÿ**ç£ç›˜I/Oæ¶ˆè€—**,ç´¢å¼•çš„ç»“æž„ç»„ç»‡è¦å°½é‡å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oçš„å­˜å–æ¬¡æ•°.
- éœ€è¦ä¸€ç§**å•ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªé”®å€¼å’Œæ•°æ®çš„å¹³è¡¡æ ‘**
##### æ•°æ®åº“ç³»ç»Ÿçš„ç£ç›˜é¢„è¯»åŽŸç†
![](attachments/Pasted%20image%2020221105155230.png)
- å°†==ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºŽä¸€ä¸ªé¡µ==ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥ #æ³¨æ„
	- ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰**å¤šä¸ªé”®å€¼å¯¹**
- æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æŽ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®žçŽ°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚
- B-Treeä¸­ä¸€æ¬¡æ£€ç´¢æœ€å¤šéœ€è¦h-1æ¬¡I/Oï¼ˆæ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜ï¼‰
##### çº¢é»‘æ ‘ä¸é€‚åˆçš„åŽŸå› 
- çº¢é»‘æ ‘è¿™ç§ç»“æž„ï¼Œ**hæ˜Žæ˜¾è¦æ·±çš„å¤š**ã€‚
- ç”±äºŽé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§
##### MySQLçš„B-Treeç´¢å¼•
- MyISAMå¼•æ“Žä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æž„ï¼Œå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚ä¸‹å›¾æ˜¯MyISAMä¸»é”®ç´¢å¼•çš„åŽŸç†å›¾ï¼š
- æ‰€æœ‰**å®žé™…éœ€è¦çš„æ•°æ®**éƒ½å­˜æ”¾äºŽ Tree çš„ Leaf Node(**å¶å­èŠ‚ç‚¹**) ï¼Œè€Œä¸”åˆ°ä»»ä½•ä¸€ä¸ª Leaf Node çš„æœ€çŸ­è·¯å¾„çš„é•¿åº¦éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„
- ![](attachments/B+%E6%A0%91%E5%BA%94%E7%94%A8%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%8A%80%E6%9C%AF%202022-11-05%2015.34.03.excalidraw.svg)
%%[ðŸ–‹ Edit in Excalidraw](attachments/B+%E6%A0%91%E5%BA%94%E7%94%A8%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%8A%80%E6%9C%AF%202022-11-05%2015.34.03.excalidraw.md), and the [dark exported image](attachments/B+%E6%A0%91%E5%BA%94%E7%94%A8%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%8A%80%E6%9C%AF%202022-11-05%2015.34.03.excalidraw.dark.svg)%%

##### ä¸€ä¸ªæ•°æ®åº“æŸ¥æ‰¾ç¤ºä¾‹
çŽ°åœ¨å‡è®¾æˆ‘ä»¬è¦æŸ¥æ‰¾ id>=18 å¹¶ä¸” id<40 çš„ç”¨æˆ·æ•°æ®ã€‚å¯¹åº”çš„ sql è¯­å¥ä¸ºï¼š
```
select * from user where id>=18 and id <40
```
å…¶ä¸­ id ä¸ºä¸»é”®
![](attachments/Pasted%20image%2020221105154928.png)
å…·ä½“çš„æŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š

â‘ ä¸€èˆ¬æ ¹èŠ‚ç‚¹éƒ½æ˜¯å¸¸é©»å†…å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é¡µ 1 å·²ç»åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶ä¸éœ€è¦åˆ°ç£ç›˜ä¸­è¯»å–æ•°æ®ï¼Œç›´æŽ¥ä»Žå†…å­˜ä¸­è¯»å–å³å¯ã€‚

ä»Ž**å†…å­˜ä¸­è¯»å–åˆ°é¡µ 1**ï¼Œè¦æŸ¥æ‰¾è¿™ä¸ª id>=18 and id <40 æˆ–è€…èŒƒå›´å€¼ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ‰¾åˆ° id=18 çš„é”®å€¼ã€‚

ä»Žé¡µ 1 ä¸­æˆ‘ä»¬å¯ä»¥**æ‰¾åˆ°é”®å€¼ 18**ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ ¹æ®æŒ‡é’ˆ p2(**åœ°å€**)ï¼Œå®šä½åˆ°**é¡µ 3**ã€‚

â‘¡è¦ä»Žé¡µ 3 ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‹¿ç€ p2 æŒ‡é’ˆåŽ»ç£ç›˜ä¸­è¿›è¡Œ**è¯»å–é¡µ 3**ã€‚

ä»Žç£ç›˜ä¸­è¯»å–é¡µ 3 åŽå°†**é¡µ 3 æ”¾å…¥å†…å­˜**ä¸­ï¼Œç„¶åŽè¿›è¡ŒæŸ¥æ‰¾ï¼Œæˆ‘ä»¬å¯ä»¥**æ‰¾åˆ°é”®å€¼ 18**ï¼Œç„¶åŽå†æ‹¿åˆ°é¡µ 3 ä¸­çš„æŒ‡é’ˆ p1ï¼Œå®šä½åˆ°é¡µ 8ã€‚

â‘¢åŒæ ·çš„é¡µ 8 é¡µä¸åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å†åŽ»ç£ç›˜ä¸­å°†é¡µ 8 è¯»å–åˆ°å†…å­˜ä¸­ã€‚

å°†é¡µ 8 è¯»å–åˆ°å†…å­˜ä¸­åŽã€‚å› ä¸ºé¡µä¸­çš„æ•°æ®æ˜¯é“¾è¡¨è¿›è¡Œè¿žæŽ¥çš„ï¼Œè€Œä¸”é”®å€¼æ˜¯æŒ‰ç…§é¡ºåºå­˜æ”¾çš„ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®äºŒåˆ†æŸ¥æ‰¾æ³•å®šä½åˆ°é”®å€¼ 18ã€‚

æ­¤æ—¶å› ä¸ºå·²ç»åˆ°æ•°æ®é¡µäº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å·²ç»æ‰¾åˆ°ä¸€æ¡æ»¡è¶³æ¡ä»¶çš„æ•°æ®äº†ï¼Œå°±æ˜¯é”®å€¼ 18 å¯¹åº”çš„æ•°æ®ã€‚

å› ä¸ºæ˜¯èŒƒå›´æŸ¥æ‰¾ï¼Œè€Œä¸”æ­¤æ—¶æ‰€æœ‰çš„æ•°æ®åˆéƒ½å­˜åœ¨å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ˜¯æœ‰åºæŽ’åˆ—çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹é¡µ 8 ä¸­çš„é”®å€¼ä¾æ¬¡è¿›è¡ŒéåŽ†æŸ¥æ‰¾å¹¶åŒ¹é…æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚

æˆ‘ä»¬å¯ä»¥ä¸€ç›´æ‰¾åˆ°é”®å€¼ä¸º 22 çš„æ•°æ®ï¼Œç„¶åŽé¡µ 8 ä¸­å°±æ²¡æœ‰æ•°æ®äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ‹¿ç€é¡µ 8 ä¸­çš„ p æŒ‡é’ˆåŽ»è¯»å–é¡µ 9 ä¸­çš„æ•°æ®ã€‚

â‘£å› ä¸ºé¡µ 9 ä¸åœ¨å†…å­˜ä¸­ï¼Œå°±åˆä¼šåŠ è½½é¡µ 9 åˆ°å†…å­˜ä¸­ï¼Œå¹¶é€šè¿‡å’Œé¡µ 8 ä¸­ä¸€æ ·çš„æ–¹å¼è¿›è¡Œæ•°æ®çš„æŸ¥æ‰¾ï¼Œç›´åˆ°å°†é¡µ 12 åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå‘çŽ° 41 å¤§äºŽ 40ï¼Œæ­¤æ—¶ä¸æ»¡è¶³æ¡ä»¶ã€‚é‚£ä¹ˆæŸ¥æ‰¾åˆ°æ­¤ç»ˆæ­¢ã€‚

æœ€ç»ˆæˆ‘ä»¬æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ•°æ®ï¼Œæ€»å…± 12 æ¡è®°å½•ï¼š

(18,kl), (19,kl), (22,hj), (24,io), (25,vg) , (29,jk), (31,jk) , (33,rt) , (34,ty) , (35,yu) , (37,rt) , (39,rt) ã€‚
