#### Cache中主存块的替换算法-全/组相联映射下有多个潜在存储位置-FIFO,LRU,LFU
- 直接映射替换时毫无选择,因此无需替换算法

##### 随机算法
- 随机确定替换的cache块

##### 先入先出算法(FIFO)
- 选择最早调入的块进行替换

##### 近期最少使用算法(least recently used,LRU)
- 依据**程序访问的局部性原理**
- 选择近期内长久未访问的cache块
- 即**淘汰最久没有用过的元素。**
- **cache行要求**
	- 每个cache行设置一个计数器,用计数值来记录主存块的使用情况
	- **计数值位数**(LRU位) #408d
		- 🐱每次替换只会在映射到的组内替换,因此只需关注该cache组中的块的访问情况
		- 2路时有一位LRU位,4位时有两位LRU位
- **计数器变换规则**(4路)
	- **命中**
		- ==命中行的计数器清零==
			- 🐱即计数器数值越小,距离上次访问时间越近
		- 比命中行计数低的计数器加一
			- 如其计数值是2,值为0,1的计数器+1
		- 比命中行计数高的计数器不变
			- 如其计数值是2,值为2,3的计数器不变 #注意
	- **未命中且还有空闲行**
		- 新装入块的计数器==置零== #408d 
		- 其余全加一
	- **未命中且无空闲行**
		- 计数值为3的行的信息块被淘汰
		- 新装入块的计数器置零
		- 其余加一
- ![](%E9%AB%98%E9%80%9F%E7%BC%93%E5%86%B2%E5%AD%98%E5%82%A8%E5%99%A8%202022-09-12%2015.21.21.excalidraw.svg)
%%[🖋 Edit in Excalidraw](%E9%AB%98%E9%80%9F%E7%BC%93%E5%86%B2%E5%AD%98%E5%82%A8%E5%99%A8%202022-09-12%2015.21.21.excalidraw.md)%%
### 注意
- **抖动**(颠簸)的发生情况
	- ==集中访问的存储区超过cache组大小==时,命中率可能变得很低
		- 🐱如cache每组4行,而频繁访问{1,2,3,4,5,1,2,3,4,5},命中率为0 #注意
		- 1,2,3,4,5为连续的5个地址>4,访问5淘汰1,不断淘汰下去

##### 最不经常使用策略(Least Frequently Used ,LFU)
- **淘汰访问频率最低的元素。**
- 注意 LFU 和 LRU 的区别
	- LRU 的淘汰规则是基于**访问时间**
	- 而 LFU 是基于**访问次数**。
- 核心是被访问一次,被访问的行计数器加一