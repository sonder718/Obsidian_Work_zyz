# 计算对应Cache的总容量,Cache行号
🐱 $按字节编址,cache容量2^{14}B->cache地址14位$
## 【例3.4】🐱
假设某个计算机的主存地址空间大小为256MB,按字节编址,指令Cache 和数据Cache分离,其**数据Cache**有8个Cache行,行长为64B。
1)若不考虑用于Cache的一致维护性和替换算法控制位,并且采用**直接映射**方式,则该数据**Cache的总容量**为多少?
2)若该Cache采用**直接映射**方式,则主存地址为3200 (十进制)的主存块对应的**Cache行号**是多少?采用**二路组相联**映射时又是多少?
3)以直接映射方式为例,简述访存过程(设访存的地址为0123456H)。

#### **解**
#### (1)
- 行长为64B ->每行存储的**数据**是64B=512位 #注意 Cache块的大小即cache行长,**不包括标记项**
- 主存地址空间大小为256MB,按字节编址--> 主存地址空间28位
- #注意 行长为64B ->**块内地址空间**6位
- 8个Cache行-->行号空间3位
- 直接映射-->**标记位长度**=28-6-3=19位
- 有效位1位
- cache行长度:$(1+19+512)=532$
- **Cache的总容量**=$532*8=4256$

#### (2)
- 主存地址为3200 (十进制)--> 
	- #注意 **直接计算主存块号**:$3200/64=50$
	- 直接映射时cache行号: $50\% 8=2$
	- 二路组相联时cache组数$8/2=4$ #注意 先求组数
		- cache组号=$50\% 4=2$
		- cache行号=$5或6$ (2×2+1) #注意 行号是cache中所有的行的编号
		- 

#### (3)
- 访存的地址为0123456H->
- 0000,0001,0010,0011,010  0,01    01,0110 #注意 主存地址中没有有效位
- 块内地址:05,0006